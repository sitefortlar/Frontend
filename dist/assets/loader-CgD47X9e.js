import{a as n}from"./auth-BNyfKWFl.js";import{c as a}from"./company--iFkMPfR.js";import"./api-BhVipoDr.js";import"./index-jy6zFgoC.js";const u=async()=>{const t=n.getToken();if(console.log("token2",t),!t)throw console.log("token not found"),new Response(null,{status:302,headers:{Location:"/login"}});const o=n.getCurrentUserFromStorage();if(console.log("user",o),!o)throw console.log("user not found"),new Response(null,{status:302,headers:{Location:"/login"}});try{const r=await a.getCompanyById(o.id);console.log("company",r);const e={products:[],categories:[],user:{...o,company:r}};return console.log("Loader returning data:",e),e}catch(r){console.error("Error loading catalog data:",r);const e={products:[],categories:[],user:o};return console.log("Loader returning fallback data:",e),e}};export{u as catalogLoader};
